<!DOCTYPE html>
<html lang="en">
 <head>

    <title>Elimate Recent Google News Articles from Search Results: Back That Ask Up</title>

   
    
    
  </head>
  <body>
   <div>
     <h2>
       Google News Search: Back That Ask Up
     </h2>
     <h3>
       Enter a Google News query and the number of days/months/years' worth of the most recent news items you want to eliminate. 
       <br>This tool will construct a date-restricted search query in Google News and open it in a new window.
     </h3>
     <h4>
       New political shenanigans disrupting your search? Back that ask up!<br>
       A celebrity feud mucking up your results? Back that ask up! <br>
       Just don't want to remember the last couple of days? BACK THAT ASK UP!
     </h4>
     <h5>
       BTAU won't work perfectly because sometimes dynamic content breaks the date-based search. But it will eliminate a lot of recent news articles.
     </h5>
     
        <label>Google News Query</label>
        <input type="text" class="gnews-query" value="Dallas Mavericks">
                           
<p>
  
     </p>
    </div>
    <div>
    
      <p>
        <label>Days' worth of results to remove from Google News search results (Max 7):</label>
      <input type="number" class="daycut" min="1" max="7" value="3">
      <input type="button" value="Go" name="submit_date" id="btn_day" onclick="day_search()">
      
      
      </p>
      <div class="daysis"></div>
      <p>
        
      <label>Months' worth of results to remove from Google News search results (Max 12):</label>
      <input type="number" min="1" max="12" value="2" class="monthcut">
       <input type="button" value="Go" name="submit_date" id="btn_month" onclick="month_search()">
      </p>
      <p>
     
      <label>Years' worth of results to remove from Google News search results (Max 20):</label>
      <input type="number" min="1" max="20" value="1" class="yearcut">
          <input type="button" value="Go" name="submit_date" id="btn_year" onclick="year_search()">
 </p>
      
    </div>
    
    <script>
   
   // Get query from input 

var newsquery = document.querySelector(".gnews-query")
var gnews = encodeURI(newsquery.value);

// Get Month/Date/Year from Input 

var ddrop = document.querySelector(".daycut").value;
var mdrop = document.querySelector(".monthcut").value;
var ydrop = document.querySelector(".yearcut").value;


// stop counting year from 0
ydrop = ydrop+1; 

//calculate number of days per unit
 var dcounter = ddrop  * 1;
// Note this just counts a month as 30 days no matter what, so it's imprecise, but close
// enough for what we're doing
var mcounter = mdrop  * 30;
var ycounter = ydrop  * 365;


var dayscounter = dcounter + mcounter + ycounter;


// setting up URL components

var baseGN = "https://www.google.com/search";
var datepre = "&tbs=cdr:1,"
var mindate = "cd_min:1/1/1900,"
// maxdate generated by function
var source = "&tbm=nws&source=hp"

// Assembling and Opening the URL for Each Function 

function day_search(){
  
  var newsquery = document.querySelector(".gnews-query")
  var gnews = encodeURI(newsquery.value);
  var query = "?q="+gnews;
  var ddrop = document.querySelector(".daycut").value;
  var dcounter = ddrop  * 1;
  var daySearch = document.querySelector(".daysis")
  var baseDate = new Date();
  baseDate.setDate(baseDate.getDate() - dcounter);
  var yyyy = baseDate.getFullYear();
  var mm = baseDate.getMonth();
  mm = mm+1; //Otherwise the month will be one off because the counting starts at 0
  var dd = baseDate.getDate();
  var cdmax = "cd_max:"+mm+"/"+dd+"/"+yyyy
  var fullSearch=baseGN+query+source+datepre+mindate+cdmax;
   window.open(fullSearch);
  
  
}

function month_search(){
  
  var newsquery = document.querySelector(".gnews-query")
  var gnews = encodeURI(newsquery.value);
  var query = "?q="+gnews;
  var mdrop = document.querySelector(".monthcut").value;
  var mdrop = mdrop;
  var dcounter = mdrop  * 30;
  var baseDate = new Date();
  baseDate.setDate(baseDate.getDate() - dcounter);
   var yyyy = baseDate.getFullYear();
  var mm = baseDate.getMonth();
  var mm = mm+1;
  var mcounter = mm  * 30;
  var dd = baseDate.getDate();
  var cdmax = "cd_max:"+mm+"/"+dd+"/"+yyyy
  var fullSearch=baseGN+query+source+datepre+mindate+cdmax;
   window.open(fullSearch);
  
  
}



function year_search(){
  
  var newsquery = document.querySelector(".gnews-query")
  var gnews = encodeURI(newsquery.value);
  var query = "?q="+gnews;
  var ydrop = document.querySelector(".yearcut").value;
  var dcounter = ydrop  * 365;
  var baseDate = new Date();
  baseDate.setDate(baseDate.getDate() - dcounter);
  var yyyy = baseDate.getFullYear();
  var mm = baseDate.getMonth();
  var mm = mm+1;
  var dd = baseDate.getDate();
  var cdmax = "cd_max:"+mm+"/"+dd+"/"+yyyy
   var fullSearch=baseGN+query+source+datepre+mindate+cdmax;
   window.open(fullSearch);
  
  
}
   
   </script>

  </body>
</html>
